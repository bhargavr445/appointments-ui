import{a as se,b as fe,c as he,d as Ce,e as ge}from"./chunk-WQLHYMLL.js";import{a as we}from"./chunk-U6SRUY6N.js";import{a as be,b as A,c as Se,d as _e,e as B,g as b,h as Ae,j as ye,k as xe,l as Ee,m as Te,n as Fe,q as x,r as ke,s as K,t as Ne}from"./chunk-NDDZS6AF.js";import{Ab as ue,Bb as ve,Da as C,Ja as p,L as ee,La as g,Ma as ie,Na as ne,Oa as oe,Pa as n,Qa as o,R as N,Ra as d,Sa as F,Ta as S,Ua as y,X as c,Y as u,Ya as l,Za as re,_a as w,a as $,ab as _,b as j,bb as ae,db as v,eb as D,fa as U,ga as te,gb as le,ia as T,lb as me,mb as pe,o as Y,ra as a,tb as P,yb as de,za as h,zb as ce}from"./chunk-XFCXPDUR.js";var Me=(e,t)=>({cp:e,"no-cursor":t}),qe=e=>({"selected-border":e}),Le=(e,t)=>({"muted-text":e,"available-text-label":t}),Oe=(e,t)=>({"available-text":e,"unavailable-text":t});function Re(e,t){if(e&1){let i=F();n(0,"div",2)(1,"div",3)(2,"a",4),S("click",function(){let m=c(i).$implicit,s=y();return u(m.isAvailable?s.selectSlot(m):"")})("mouseleave",function(){c(i);let m=y();return u(m.elementTouched())}),n(3,"div",5)(4,"h6",6),l(5),o(),n(6,"p",7),l(7),o()()()()()}if(e&2){let i=t.$implicit;p("ngClass",D(6,Me,i.isAvailable,!i.isAvailable)),a(),p("ngClass",v(9,qe,i.isSelected)),a(3),p("ngClass",D(11,Le,!i.isAvailable,i.isAvailable)),a(),w(" ",i.label," "),a(),p("ngClass",D(14,Oe,i.isAvailable,!i.isAvailable)),a(),w(" ",i.isAvailable?"Available":"Unavailable"," ")}}var I=class e{slots=Ne;bookedSlots=te.required();availableSlots=pe(()=>this.deriveAvailableSlots(this.bookedSlots()));selectedTimeEmitter=U();touchedEmitter=U();deriveAvailableSlots(t){return this.slots.map(r=>j($({},r),{isAvailable:!t.includes(String(r.value))}))}selectSlot(t){this.availableSlots.update(i=>i.map(r=>j($({},r),{isSelected:r.value==t.value}))),this.selectedTimeEmitter.emit(t.value)}elementTouched(){this.touchedEmitter.emit()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-time-picker"]],inputs:{bookedSlots:[1,"bookedSlots"]},outputs:{selectedTimeEmitter:"selectedTimeEmitter",touchedEmitter:"touchedEmitter"},decls:4,vars:0,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-6","col-md-4","col-lg-3","mb-3",3,"ngClass"],[1,"card","text-center","shadow-sm","time-card",3,"ngClass"],[1,"text-decoration-none",3,"click","mouseleave"],[1,"card-body","pad-4"],[1,"card-title","fw-bold","mb-1",3,"ngClass"],[1,"card-text","small","mb-0",3,"ngClass"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1),ne(2,Re,8,17,"div",2,ie),o()()),i&2&&(a(2),oe(r.availableSlots()))},dependencies:[P],styles:[".pad-4[_ngcontent-%COMP%]{padding:4px}.cp[_ngcontent-%COMP%]{cursor:pointer}.no-cursor[_ngcontent-%COMP%]{cursor:not-allowed}.available-text-label[_ngcontent-%COMP%]{background-image:linear-gradient(to right,green,#4caf50);display:inline;-webkit-background-clip:text;background-clip:text;color:transparent}.available-text[_ngcontent-%COMP%]{color:green}.unavailable-text[_ngcontent-%COMP%]{color:#f47a7a}.time-card[_ngcontent-%COMP%]{transition:transform .9s;background-color:#0085f205}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.selected-border[_ngcontent-%COMP%]{border:2px solid green}.muted-text[_ngcontent-%COMP%]{--bs-text-opacity: 1;color:#727a83bf!important}button[_ngcontent-%COMP%]{border:none;padding:0}"]})};var k=class e{http=N(de);selectedDate=T(x(new Date,"MM/dd/yyyy"));availableSlotsForSelectedDate=ve(()=>({url:`checkIfAppointIsAlreadySchedudForToday?date=${this.selectedDate()}`,method:"GET"}),{defaultValue:[],parse:t=>t.data.filter(m=>m.status==="confirmed").map(m=>m.time)});scheduleAppointment(t){return this.http.post("schedule",t)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ee({token:e,factory:e.\u0275fac})};var E=e=>({"invalid-label":e});function Ge(e,t){if(e&1){let i=F();n(0,"div",4)(1,"strong"),l(2),o(),n(3,"button",28),S("click",function(){c(i);let m=y();return u(m.closeAlert())}),n(4,"span",29),l(5,"\xD7"),o()()()}if(e&2){let i=y();a(2),re(i.scheduleAppointmentError())}}function He(e,t){e&1&&(n(0,"div",12),l(1,"This is a required field"),o())}function $e(e,t){e&1&&(n(0,"div",12),l(1,"This is a required field"),o())}function je(e,t){e&1&&(n(0,"div",12),l(1,"This is a required field"),o())}function Ue(e,t){e&1&&(n(0,"div",12),l(1,"This is a required field"),o())}function Be(e,t){e&1&&(n(0,"div",12),l(1,"This is a required field"),o())}function Ke(e,t){e&1&&(n(0,"div",12),l(1,"This is a required field"),o())}var M=class e{appointmentApiService=N(k);engagedSlotsList=me(()=>this.appointmentApiService.availableSlotsForSelectedDate.value());appointmentForm;minDate=x(we(new Date,0),K);scheduleApointmentApiProgress=T(!1);scheduleAppointmentError=T("");ngOnInit(){this.#t(),this.appointmentForm.get("appointment.date").valueChanges.pipe(Y(t=>this.#e(t))).subscribe(t=>{this.appointmentApiService.selectedDate.set(t)})}#e(t){let[i,r,m]=t.split("-").map(Number),s=new Date(i,r-1,m);return x(s,ke)}#t(){this.appointmentForm=new B({firstName:new b("",{nonNullable:!0,validators:[A.required]}),lastName:new b("",{nonNullable:!0,validators:[A.required]}),email:new b("",{nonNullable:!0,validators:[A.required]}),phoneNumber:new b("",{nonNullable:!0,validators:[A.required]}),note:new b("",{nonNullable:!0}),appointment:new B({date:new b(x(new Date,K),{nonNullable:!0,validators:[A.required]}),time:new b("",{nonNullable:!0,validators:[A.required]})})})}selectedTime(t){this.appointmentForm.get("appointment.time").setValue(t)}scheduleAppointment(){if(this.scheduleAppointmentError.set(""),this.appointmentForm.valid){this.scheduleApointmentApiProgress.set(!0);let t=this.appointmentForm.getRawValue();t.appointment.date=this.#e(t.appointment.date),this.appointmentApiService.scheduleAppointment(t).subscribe({next:i=>this.#n(i),error:i=>this.#i(i)})}else this.appointmentForm.markAllAsTouched()}#i(t){this.scheduleApointmentApiProgress.set(!1),t?.status==409?this.scheduleAppointmentError.set(t?.error?.message):this.scheduleAppointmentError.set("Failed to create Appointment for Technical Reasons. Please try later."),window.scrollTo({top:0,behavior:"smooth"})}#n(t){this.appointmentApiService.availableSlotsForSelectedDate.reload(),this.appointmentForm.reset(),this.scheduleApointmentApiProgress.set(!1)}touchedEvent(){this.appointmentForm.get("appointment.time").touched||this.appointmentForm.get("appointment.time").markAsTouched({emitEvent:!0})}preventTyping(t){t.preventDefault()}closeAlert(){this.scheduleAppointmentError.set("")}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-schedule-appointment"]],features:[ae([k])],decls:62,vars:29,consts:[[1,"card","card-shadow"],[1,"card-header"],[1,"test-clip"],[1,"card-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"container","mt-4"],[3,"formGroup"],[1,"row"],[1,"col-12","col-md-6","mb-3"],[1,"form-floating"],["type","text","id","firstName","formControlName","firstName","placeholder","First Name",1,"form-control","apt-form-control"],["for","firstName",3,"ngClass"],[1,"apt-validation"],["type","text","id","lastName","formControlName","lastName","placeholder","Last Name",1,"form-control","apt-form-control"],["for","lastName",3,"ngClass"],["type","email","id","email","formControlName","email","placeholder","Email",1,"form-control","apt-form-control"],["for","email",3,"ngClass"],["type","tel","id","phone","formControlName","phoneNumber","placeholder","Phone",1,"form-control","apt-form-control"],["for","phone",3,"ngClass"],["formGroupName","appointment",1,"row"],["type","date","id","date","formControlName","date",1,"form-control","apt-form-control",3,"keydown","min"],["for","date",3,"ngClass"],[1,"col-12","col-md-12","mb-3"],["for","time",1,"form-label","test-clip",3,"ngClass"],[3,"selectedTimeEmitter","touchedEmitter","bookedSlots"],[1,"col-12","text-end"],[1,"btn","btn-primary","rounded-pill","px-4","shadow-sm",3,"click"],[1,"btn","btn-outline-warning","rounded-pill","px-4","ms-2"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(i,r){if(i&1){let m=F();n(0,"div",0)(1,"div",1)(2,"h4",2),l(3," Schedule Appointmment "),o()(),n(4,"div",3),C(5,Ge,6,1,"div",4),n(6,"div",5)(7,"form",6)(8,"div",7)(9,"div",8),_(10)(11),n(12,"div",9),d(13,"input",10),n(14,"label",11),l(15,"First Name *"),o()(),C(16,He,2,0,"div",12),o(),n(17,"div",8),_(18)(19),n(20,"div",9),d(21,"input",13),n(22,"label",14),l(23,"Last Name *"),o()(),C(24,$e,2,0,"div",12),o(),n(25,"div",8),_(26)(27),n(28,"div",9),d(29,"input",15),n(30,"label",16),l(31,"Email address *"),o()(),C(32,je,2,0,"div",12),o(),n(33,"div",8),_(34)(35),n(36,"div",9),d(37,"input",17),n(38,"label",18),l(39,"Phone *"),o()(),C(40,Ue,2,0,"div",12),o(),n(41,"div",19)(42,"div",8),_(43)(44),n(45,"div",9)(46,"input",20),S("keydown",function(f){return c(m),u(r.preventTyping(f))}),o(),n(47,"label",21),l(48,"Appointment Date *"),o()(),C(49,Be,2,0,"div",12),o(),n(50,"div",22),_(51)(52),n(53,"label",23),l(54,"Appointment Time *"),o(),C(55,Ke,2,0,"div",12),n(56,"app-time-picker",24),S("selectedTimeEmitter",function(f){return c(m),u(r.selectedTime(f))})("touchedEmitter",function(){return c(m),u(r.touchedEvent())}),o()()(),n(57,"div",25)(58,"button",26),S("click",function(){return c(m),u(r.scheduleAppointment())}),l(59),o(),n(60,"button",27),l(61,"Cancel"),o()()()()()()()}if(i&2){a(5),g(r.scheduleAppointmentError()?5:-1),a(2),p("formGroup",r.appointmentForm);let m=r.appointmentForm.get("firstName"),s=m.touched&&m.invalid&&m.hasError("required");a(7),p("ngClass",v(17,E,s)),a(2),g(s?16:-1);let f=r.appointmentForm.get("lastName"),z=f.touched&&f.invalid&&f.hasError("required");a(6),p("ngClass",v(19,E,z)),a(2),g(z?24:-1);let O=r.appointmentForm.get("email"),J=O.touched&&O.invalid&&O.hasError("required");a(6),p("ngClass",v(21,E,J)),a(2),g(J?32:-1);let R=r.appointmentForm.get("phoneNumber"),Q=R.touched&&R.invalid&&R.hasError("required");a(6),p("ngClass",v(23,E,Q)),a(2),g(Q?40:-1);let G=r.appointmentForm.get("appointment.date"),W=G.touched&&G.invalid&&G.hasError("required");a(6),p("min",r.minDate),a(),p("ngClass",v(25,E,W)),a(2),g(W?49:-1);let H=r.appointmentForm.get("appointment.time"),X=H.touched&&H.invalid&&H.hasError("required");a(4),p("ngClass",v(27,E,X)),a(2),g(X?55:-1),a(),p("bookedSlots",r.engagedSlotsList()),a(3),w(" ",r.scheduleApointmentApiProgress()?"Scheduling...":"Schedule","")}},dependencies:[Te,Ae,be,Se,_e,Fe,ye,Ee,xe,I,P],encapsulation:2})};var De=[{path:"",redirectTo:"schedule",pathMatch:"full"},{path:"schedule",component:M},{path:"admin",loadComponent:()=>import("./chunk-5D6LLU3R.js").then(e=>e.AdminComponent),children:[{path:"",redirectTo:"date-search",pathMatch:"full"},{path:"email-search",loadComponent:()=>import("./chunk-HTGWJ5JU.js").then(e=>e.EmailSearchComponent)},{path:"date-search",loadComponent:()=>import("./chunk-ED2GT4QQ.js").then(e=>e.DateSearchComponent)}]}];var Pe={apiUrl:"https://appointments-api-smot.onrender.com/api/"};var Ie=(e,t)=>{let i=Pe.apiUrl;return t(e.clone({url:`${i}${e.url}`}))};var Ve={providers:[le({eventCoalescing:!0}),ge(De),ce(ue([Ie]))]};var q=class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-header"]],decls:11,vars:1,consts:[[1,"navbar","navbar-expand-md","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navItems","aria-controls","navItems","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navItems",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"]],template:function(i,r){i&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),l(3,"Appointments"),o(),n(4,"button",3),d(5,"span",4),o(),n(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),l(10,"Admin"),o()()()()()()),i&2&&(a(9),p("routerLink","/admin"))},dependencies:[he,Ce],encapsulation:2})};var L=class e{title="appointments-ui";static \u0275fac=function(i){return new(i||e)};static \u0275cmp=h({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"main"]],template:function(i,r){i&1&&(d(0,"app-header"),n(1,"main",0),d(2,"router-outlet"),o())},dependencies:[fe,q],styles:[".main-container[_ngcontent-%COMP%]{height:90vh}"]})};se(L,Ve).catch(e=>console.error(e));
